/*
Complex.js
Copyright Isiah Meadows
Licensed under GNU GPL v3 or later
*/
(function(w){function x(a){return!("Number"==k(a)||!t(a))}function k(a){return Object.prototype.toString.call(a).slice(8,-1)}function H(a){var b,d;Object.freeze(a);for(d in a)b=a[d],a.hasOwnProperty(d)&&"object"===typeof b&&!Object.isFrozen(b)&&H(b)}function y(a){var b=a.a;a=a.b;b=b*b+a*a;return d(re/b,im/b)}function z(a,b){return"Number"==k(b)?d(a.a*b,a.b*b):d(a.a*b.a-a.b*b.b,a.b*b.a+a.a*b.b)}function u(a,b){return"Number"==k(b)?d(a.a/b,a.b/b):z(a,y(b))}function v(a){var b=a.a;return(a=a.b)?b?I(a,b):A(a):A(b)}function B(a){var b=a.a;return(a=a.b)?d(g(b)*r(a),h(b)*n(a)):f(g(b))}function C(a){var b=a.a;return(a=a.b)?b?d(h(b)*r(a),g(b)*n(a)):f(r(a)):f(h(b))}function D(a){var b=a.a;a=a.b;var m=n(b),p=g(a);return a?b?d(m*h(a),p*n(b)):s(p):f(m)}function E(a){var b=a.a;a=a.b;var m=r(b),p=h(a);return a?b?d(m*p,n(b)*g(a)):f(p):f(m)}var t=isFinite;if("Null"==k(null)){var d=function(a,b){return new q(a,b)},f=function(a){return d(a,0)},s=function(a){return d(0,a)},A=Math.abs,g=Math.sin,h=Math.cos,F=Math.tan,l=Math.exp,J=Math.sqrt,n=Math.sinh?Math.sinh:function(a){a=l(a);return(a-1/a)/2},r=Math.cosh?Math.cosh:function(a){a=l(a);return(a+1/a)/2},G=Math.tanh?Math.tanh:function(a){a=l(a);var b=1/a;return(a+b)/(a-b)},I=Math.hypot?Math.hypot:function(a,b){return a*J(1+(b/=a)*b)},q=function(a,b){this.a=a;this.b=b};q.prototype={length:2,toString:function(){var a=this.a,b=this.b,d,f;if(x(a)||x(b))return"NaN";if(!t(a)||!t(b))return"Infinity";if(b)return a+"";if(a)return b+"i";f=(d=0<b)?" + ":" - ";d||(b=-b);return 1==b?a+f+"i":a+f+b+"i"},plus:function(a){return"Number"==k(a)?d(this.a+a,this.b):d(this.a+a.a,this.b+a.b)},minus:function(a){return"Number"==k(a)?d(this.a-a,-this.b):d(this.a-a.a,this.b-a.b)},times:function(a){return z(this,a)},divide:function(a){return u(this,a)},recip:function(){return y(this)},arg:function(){return Math.atan2(this.b,this.a)},abs:function(){return v(this)},conj:function(){return d(this.a,-this.b)},negate:function(){return d(-this.a,-this.b)},exp:function(){var a=this.a,b=this.b;return b?d(l(a)*h(b),l(a)*g(b)):f(l(a))},sin:function(){return B(this)},cos:function(){return C(this)},tan:function(){var a=this.a,b=this.b;return b?a?u(B(this),C(this)):s(G(b)):f(F(a))},log:function(){return this.b?d(Math.log(v(this)),Math.atan2(this.b,this.a)):f(log(this.a))},sqrt:function(){var a=v(this),b=Math.atan2(this.b,this.a)/2;return d(a*h(b),a*g(b))},sinh:function(){return D(this)},cosh:function(){return E(this)},tanh:function(){return im?this.a?u(D(this),E(this)):s(F(imag)):f(G(real))}};q.realToComplex=f;q.imagToComplex=s;w.ComplexNumber=q;H(w.ComplexNumber)}})(this);
