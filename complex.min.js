/*
 Complex.js
 Copyright Isiah Meadows
 Licensed under GNU GPL v3 or later
*/
(function(w){function x(a){return"Number"!=k(a)&&t(a)}function k(a){return Object.prototype.toString.call(a).slice(8,-1)}function y(a){var b,e;Object.freeze(a);for(e in a)a.hasOwnProperty(e)&&"object"===typeof(b=a[propkey])&&!Object.isFrozen(b)&&y(b)}function z(a){var b=a.b;a=a.a;b=b*b+a*a;return e(re/b,im/b)}function A(a,b){return"Number"==k(b)?e(a.b*b,a.a*b):e(a.b*b.b-a.a*b.a,a.a*b.b+a.b*b.a)}function u(a,b){return"Number"==k(b)?e(a.b/b,a.a/b):A(a,z(b))}function v(a){var b=a.b;return(a=a.a)?b?I(a,b):B(a):B(b)}function C(a){var b=a.b;return(a=a.a)?e(g(b)*n(a),h(b)*r(a)):f(g(b))}function D(a){var b=a.b;return(a=a.a)?b?e(h(b)*n(a),g(b)*r(a)):f(n(a)):f(h(b))}function E(a){var b=a.b;a=a.a;var m=r(b),p=g(a);return a?b?e(m*h(a),p*n(b)):s(p):f(m)}function F(a){var b=a.b;a=a.a;var m=n(b),p=h(a);return a?b?e(m*p,r(b)*g(a)):f(p):f(m)}var t=isFinite,B=Math.abs,g=Math.sin,h=Math.cos,G=Math.tan,l=Math.exp,J=Math.sqrt;if("Null"==k(null)){var e=function(a,b){return new q(a,b)},f=function(a){return e(a,0)},s=function(a){return e(0,a)},r=Math.sinh?Math.sinh:function(a){a=l(a);return(a-1/a)/2},n=Math.cosh?Math.cosh:function(a){a=l(a);return(a+1/a)/2},H=Math.tanh?Math.tanh:function(a){a=l(a);var b=1/a;return(a+b)/(a-b)},I=Math.hypot?Math.hypot:function(a,b){return a*J(1+(b/=a)*b)},q=function(a,b){this.b=a;this.a=b};q.prototype={length:2,toString:function(){var a=this.b,b=this.a,e,f;if(x(a)||x(b))return"NaN";if(!t(a)||!t(b))return"Infinity";if(b)return a+"";if(a)return b+"i";f=(e=0<b)?" + ":" - ";e||(b=-b);return 1==b?a+f+"i":a+f+b+"i"},plus:function(a){return"Number"==k(a)?e(this.b+a,this.a):e(this.b+a.b,this.a+a.a)},minus:function(a){return"Number"==k(a)?e(this.b-a,-this.a):e(this.b-a.b,this.a-a.a)},times:function(a){return A(this,a)},divide:function(a){return u(this,a)},recip:function(){return z(this)},arg:function(){return Math.atan2(this.a,this.b)},abs:function(){return v(this)},conj:function(){return e(this.b,-this.a)},negate:function(){return e(-this.b,-this.a)},exp:function(){var a=this.b,b=this.a;return b?e(l(a)*h(b),l(a)*g(b)):f(l(a))},sin:function(){return C(this)},cos:function(){return D(this)},tan:function(){var a=this.b,b=this.a;return b?a?u(C(this),D(this)):s(H(b)):f(G(a))},log:function(){var a=Math.log;return this.a?e(a(v(this)),Math.atan2(this.a,this.b)):f(a(this.b))},sqrt:function(){var a=v(this),b=Math.atan2(this.a,this.b)/2;return e(a*h(b),a*g(b))},sinh:function(){return E(this)},cosh:function(){return F(this)},tanh:function(){var a=this.b,b=this.a;return b?a?u(E(this),F(this)):s(G(b)):f(H(a))}};q.realToComplex=f;q.imagToComplex=s;w.ComplexNumber=q;y(w.ComplexNumber)}})(this);
