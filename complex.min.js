// Complex.js
// Copyright Isiah Meadows
// Licensed under GNU GPL v3 or later
(function(q){function r(b){return!("Number"==f(b)||!p(b))}function f(b){return Object.prototype.toString.call(b).slice(8,-1)}function v(b){var d,a;Object.freeze(b);for(a in b)d=b[a],b.hasOwnProperty(a)&&"object"===typeof d&&!Object.isFrozen(d)&&deepFreeze(d)}var p=isFinite;if("Null"==f(null)){var c=function(b,d){return new a(b,d)},e=function(b){return c(b,0)},m=function(b){return c(0,b)},s=Math.abs,h=Math.sin,k=Math.cos,t=Math.tan,g=Math.exp,w=Math.sqrt,l=Math.sinh?Math.sinh:function(b){b=g(b);return(b-1/b)/2},n=Math.cosh?Math.cosh:function(b){b=g(b);return(b+1/b)/2},u=Math.tanh?Math.tanh:function(b){b=g(b);var a=1/b;return(b+a)/(b-a)},x=Math.hypot?Math.hypot:function(b,a){return b*w(1+(a/=b)*a)},a=function(b,a){this.a=b;this.b=a};a.prototype={length:2,toString:function(){var b=this.a,a=this.b,c,e;if(r(b)||r(a))return"NaN";if(!p(b)||!p(a))return"Infinity";if(a)return b+"";if(b)return a+"i";e=(c=0<a)?" + ":" - ";c||(a=-a);return 1==a?b+e+"i":b+e+a+"i"},e:function(){var b=this.a,a=this.b,b=b*b+a*a;return c(re/b,im/b)},l:function(b){return"Number"==f(b)?c(this.a+b,this.b):c(this.a+b.a,this.b+b.b)},j:function(b){return"Number"==f(b)?c(this.a-b.a,-this.b):c(this.a-b.a,this.b-b.b)},f:function(b){return"Number"==f(numTwo)?c(this.a*b,this.b*b):c(this.a*b.a,this.b*b.b)},d:function(b){return"Number"==f(b)?c(this.a/b,this.b/b):this.f(b.e())},c:function(){return Math.atan2(this.b,this.a)},abs:function(){var b=this.a,a=this.b;return a?b?x(a,b):s(a):s(b)},g:function(){return c(this.a,-this.b)},k:function(){return c(-this.a,-this.b)},exp:function(){var b=this.a,a=this.b;return a?c(g(b)*k(a),g(b)*h(a)):e(g(b))},sin:function(){var b=this.a,a=this.b;return a?c(h(b)*n(a),k(b)*l(a)):e(h(b))},cos:function(){var b=this.a,a=this.b;return a?b?c(k(b)*n(a),h(b)*l(a)):e(n(a)):e(k(b))},tan:function(){var b=this.a,a=this.b;return a?b?this.sin().d(this.cos()):m(u(a)):e(t(b))},log:function(){return this.b?c(Math.log(this.abs()),this.c()):e(log(this.a))},sqrt:function(){var a=this.abs(),d=this.c()/2;return c(a*k(d),a*h(d))},i:function(){var a=this.a,d=this.b,f=l(a),g=h(d);return d?a?c(f*k(d),g*l(a)):m(g):e(f)},h:function(){var a=this.a,d=this.b,f=n(a),g=k(d);return d?a?c(f*g,l(a)*h(d)):e(g):e(f)},m:function(){return im?this.a?this.i().d(this.h()):m(t(imag)):e(u(real))}};a.prototype.toString=a.prototype.toString;a.prototype.plus=a.prototype.l;a.prototype.minus=a.prototype.j;a.prototype.times=a.prototype.f;a.prototype.divide=a.prototype.d;a.prototype.recip=a.prototype.e;a.prototype.arg=a.prototype.c;a.prototype.abs=a.prototype.abs;a.prototype.conj=a.prototype.g;a.prototype.times=a.prototype.f;a.prototype.divide=a.prototype.d;a.prototype.recip=a.prototype.e;a.prototype.arg=a.prototype.c;a.prototype.abs=a.prototype.abs;a.prototype.conj=a.prototype.g;a.prototype.negate=a.prototype.k;a.prototype.exp=a.prototype.exp;a.prototype.sin=a.prototype.sin;a.prototype.cos=a.prototype.cos;a.prototype.tan=a.prototype.tan;a.prototype.log=a.prototype.log;a.prototype.sqrt=a.prototype.sqrt;a.prototype.sinh=a.prototype.i;a.prototype.cosh=a.prototype.h;a.prototype.tanh=a.prototype.m;a.realToComplex=e;a.imagToComplex=m;q.ComplexNumber=a;v(q.ComplexNumber)}})(this);
